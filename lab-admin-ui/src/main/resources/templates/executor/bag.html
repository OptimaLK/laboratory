<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
>

<head th:replace="fragments/executor/header :: head"></head>

<body class="bg-light">

<div th:replace="fragments/executor/header :: header"></div>

<div class="d-flex tools_container">
    <div class="content">
        <div class="card mb-4">
            <div class="card-body">
                <div class="attrs" style="background: none; margin: auto;">
                    <form class="d-inline" th:action="@{'/bag/delete/'}" th:method="delete">
                        <button style="width: 100%; margin-bottom: 15px;" type="btn btn-icon btn-pill btn-danger">
                            Выложить все оборудование
                        </button>
                    </form>
                    <form class="form-group" th:action="@{'/bag/form'}">
                        <button style="width: 100%; margin: 0;" type="submit">Сформировать</button>
                    </form>
                    <div class="form-group">
                        <label for="users">Выбор сумки</label>
                        <select class="form-control" id="users" size="1" onchange="location = this.value;">
                            <option th:id="bg" th:each="bags : ${bagAll}"
                                    th:text="${bags.name}"
                                    th:value="'/bag/select/' + ${bags.id}"></option>
                        </select>
                    </div>
                </div>
                <div class="d-flex flex-wrap justify-content-center">
                    <dl class="dl-horizontal attrs" th:each="equ : ${equipmentsInLastBag}">
                        <dt>Название:</dt>
                        <dd th:text="${equ.name}"></dd>
                        <dt>Зав. №:</dt>
                        <dd th:text="${equ.factoryNumber}"></dd>
                        <dt>Свидетельство:</dt>
                        <dd th:text="${equ.verificationNumber}"></dd>
                        <dt>Дата поверки:</dt>
                        <dd th:text="${equ.verificationDateEnd}"></dd>
                            <div>
                            <form class="form-group" method="POST" th:action="@{'/bag/get/' + ${equ.id}}">
                                <button style="background-color: #ffbebe" type="submit">Выложить</button>
                            </form>
                        </div>
                    </dl>
                </div>
                <div>
                    <table th:each="bag : ${bagAll}">
                        <thead>
                        <tr>
                            <td th:text="${bag.name}"></td>
                        </tr>
                        <tr>
                            <td th:text="${bag.birthTime}"></td>
                            <td th:text="${bag.lifeTime}"></td>
                            <td th:text="${bag.work.objectName}"></td>
                        </tr>
                        <tr><td>Оборудование</td></tr>
                        </thead>
                        <tbody>
                        <tr th:each="bagEq : ${bag.equipments}">
                            <td th:text="${bagEq.name}"></td>
                            <td th:text="${bagEq.factoryNumber}"></td>
                            <td th:text="${bagEq.verificationNumber}"></td>
                            <td th:text="${bagEq.verificationDateEnd}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script th:replace="fragments/executor/footer :: scripts"></script>

</body>
</html>